#!/bin/bash

[[ "$PAKLIB_ROOT" == "" ]] && export PAKLIB_ROOT=$(pwd -P)/.spm/paklib

function untar_payload {
	match=$(grep --text --line-number '^PAYLOAD:$' $0 | cut -d ':' -f 1)
	payload_start=$((match + 1))
	tail -n +$payload_start $0 | base64 -d | tar -xjf -
}

if [[ ! -d "${PAKLIB_ROOT}" ]]; then
	untar_payload
fi
export LUA_PATH=${PAKLIB_ROOT}/?.lua
lua ${PAKLIB_ROOT}/main.lua $@
exit $?
PAYLOAD:
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
