#!/bin/bash

[[ "$PAKLIB_ROOT" == "" ]] && export PAKLIB_ROOT=$(pwd -P)/.spm/paklib

function untar_payload {
	match=$(grep --text --line-number '^PAYLOAD:$' $0 | cut -d ':' -f 1)
	payload_start=$((match + 1))
	tail -n +$payload_start $0 | base64 -d | tar -xjf -
}

if [[ ! -d "${PAKLIB_ROOT}" ]]; then
	untar_payload
fi
export LUA_PATH=${PAKLIB_ROOT}/?.lua
lua ${PAKLIB_ROOT}/main.lua $@
exit $?
PAYLOAD:
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
