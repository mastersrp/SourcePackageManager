#!/bin/bash

[[ "$PAKLIB_ROOT" == "" ]] && export PAKLIB_ROOT=$(pwd -P)/.spm/paklib

function untar_payload {
	match=$(grep --text --line-number '^PAYLOAD:$' $0 | cut -d ':' -f 1)
	payload_start=$((match + 1))
	tail -n +$payload_start $0 | base64 -d | tar -xjf -
}

if [[ ! -d "${PAKLIB_ROOT}" ]]; then
	untar_payload
fi
export LUA_PATH=${PAKLIB_ROOT}/?.lua
install -d build/
lua ${PAKLIB_ROOT}/main.lua $@
exit $?
PAYLOAD:
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
gA==
